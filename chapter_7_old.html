<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>chapter_7_old.knit</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs-2.26/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.33/datatables.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="css/Custumed_Style.css" type="text/css" />
    <link rel="stylesheet" href="css/zh-CN.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: center, middle
&lt;span style="font-size: 60px;"&gt;第七章&lt;/span&gt; &lt;br&gt;
&lt;span style="font-size: 50px;"&gt;如何进行基本的数据分析 (一) &lt;/span&gt; &lt;br&gt;
&lt;span style="font-size: 50px;"&gt;*t*-test和ANOVA&lt;/span&gt; &lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;span style="font-size: 30px;"&gt;胡传鹏&lt;/span&gt; &lt;br&gt;
&lt;span style="font-size: 30px;"&gt;2023/04/10&lt;/span&gt; &lt;br&gt;

---
class: center, middle
&lt;span style="font-size: 60px;"&gt;7.1  *t*-test&lt;/span&gt; &lt;br&gt;
---
# &lt;h1 lang="zh-CN"&gt;回顾*t*检验基础知识&lt;/h1&gt;
&lt;br&gt;
&lt;center&gt;
##  One sample *t*-test：单样本*t*检验
&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
### **Compare the sample mean against a fixed value.**
&lt;br&gt;
## The hypotheses:
* `\(H_0\)`: The current sample is sampled from a population with μ of the current value.
* `\(H_1\)`: The current sample is sampled from a population with μ that different from the current value.
* The significance level: `\(\alpha\)` = 0.05
---
# &lt;h1 lang="zh-CN"&gt;回顾*t*检验基础知识 &lt;/h1&gt;

&lt;br&gt;
## Typical research questions are:

  与某一特定值比较的三种情况（大于/小于或等于)
&lt;br&gt;

* whether the mean (m) of the sample is equal to the theoretical mean, `\(\mu\)`?
* whether the mean (m) of the sample is less than the theoretical mean, `\(\mu\)`?
* whether the mean (m) of the sample is greater than the theoretical mean, `\(\mu\)`?

---
# &lt;h1 lang="zh-CN"&gt;回顾*t*检验基础知识&lt;/h1&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;In statistics, we can define the corresponding null hypothesis ($H_0$) as follow:&lt;/h2&gt;
&lt;br&gt;

* `\(H_0\)`: m = μ
* `\(H_0\)`: m &lt;= μ
* `\(H_0\)`: m =&gt; μ

&lt;br&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;The corresponding alternative hypotheses (H1) are as follow:&lt;/h2&gt;
&lt;br&gt;
&lt;h3 lang="en"&gt;H1:m ≠ μ (not equal to)&lt;/h3&gt;
&lt;h3 lang="en"&gt;H1:m &gt; μ (greater than)&lt;/h3&gt;
&lt;h3 lang="en"&gt;H1:m &lt; μ (less than)&lt;/h3&gt;
---
# &lt;h1 lang="zh-CN"&gt;回顾*t*检验基础知识&lt;/h1&gt;
&lt;br&gt;
&lt;center&gt;
&lt;h2 lang="en"&gt;Two-sample *t*-test ：双样本*t*检验&lt;/h2&gt;
&lt;/center&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;Dependent(paried) *t*-test&lt;/h2&gt;
&lt;h3 lang="en"&gt;Population of difference scores has a normal distribution [population normality]&lt;/h3&gt;
&lt;h3 lang="en"&gt;Correlation between pairs of scores [dependent data]&lt;/h3&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;Independent *t*-test&lt;/h2&gt;
&lt;br&gt;
&lt;h3 lang="en"&gt;Population of difference scores has a normal distribution [population normality]&lt;/h3&gt;
&lt;h3 lang="en"&gt;The variances in two populations are similar [homogeneity of variance]&lt;/h3&gt;
---
# &lt;h1 lang="zh-CN"&gt;回顾*t*检验基础知识&lt;/h1&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;Dependent (Paired) *t*-test：配对样本*t*检验&lt;/h2&gt;
&lt;h3 lang="en"&gt;The paired *t*-test is used to compare the means between two related groups of samples. In this case, you have two values (i.e., pair of values) for the same samples.&lt;/h3&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;Independent *t*-test:独立样本*t*检验&lt;/h2&gt;
&lt;h2 lang="en"&gt;The independent samples *t*-test is used to compare the mean of two independent groups.&lt;/h2&gt;
&lt;br&gt;
&lt;h2 lang="en"&gt;Typical research questions are:&lt;/h2&gt;
&lt;h2 lang="en"&gt;whether the mean of group A (μ) is equal to the mean of group B (μ)?&lt;/h2&gt;
&lt;h2 lang="en"&gt;whether the mean of group A (μ) is less than the mean of group B (μ)?&lt;/h2&gt;
&lt;h2 lang="en"&gt;whether the mean of group A (μ) is greater than the mean of group B (μ)?&lt;/h2&gt;
---
class: center, middle
&lt;span style="font-size: 60px;"&gt;7.2 *t*-test in R&lt;/span&gt; &lt;br&gt;
---
# &lt;h1 lang="zh-CN"&gt;几个假想的问题&lt;/h1&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h3 lang="zh-CN"&gt;1. “在penguin数据中，参与者对于家的依恋水平是否小于/等于/大于均值水平(假设在总体水平上，人们对家庭的依恋水平(HOME)均值为3.5)？”&lt;/h3&gt;
&lt;br&gt;
&lt;h3 lang="zh-CN"&gt;2. “在penguin数据中，男女生在亲密关系经验(ECR)中的得分是否存在显著差异？”&lt;/h3&gt;
&lt;br&gt;
&lt;h3 lang="zh-CN"&gt;3. “在penguin数据中，参与者在不同时间的温度差异是否具有显著性？”&lt;/h3&gt;

---

# &lt;h1 lang="zh-CN"&gt;载入包 - 设置工作路径 - 导入原始数据&lt;/h1&gt;

```r
# 检查是否已安装 pacman
if (!requireNamespace("pacman", quietly = TRUE)) {
  install.packages("pacman") }   # 如果未安装，则安装包

# 使用p_load来载入需要的包
pacman::p_load("tidyverse", "bruceR")
```

---
# &lt;h1 lang="zh-CN"&gt;载入包 - 设置工作路径 - 导入原始数据&lt;/h1&gt;

```r
# WD &lt;-  here::here()
df.pg.raw &lt;-  read.csv('./data/penguin/penguin_rawdata.csv',
                       header = T, sep=",", stringsAsFactors = FALSE)
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-55a0af7345b9d1d30e7c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-55a0af7345b9d1d30e7c">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],["Tsinghua","Oxford","Oxford","Oxford","Chile","Bamberg","Oxford","Oxford","Oxford","Oslo"],[1922,1940,1945,1948,1948,1951,1952,1952,1952,1953],[2,1,1,2,2,1,1,2,2,2],[6,7,6,7,6,7,4,6,7,7],[2,1,1,1,1,1,1,2,2,2],[3,4,3,2,4,4,3,2,3,5],[2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1],[0,0,0,3,0,0,1,0.2,0,0],[0,0,8,0,0,0,3,0,0,0],[2,2,2,2,2,2,2,2,2,2],[0,null,null,null,1,null,null,null,null,null],[36.75,35.4,35.1,35.95,36.08333333,35.6,35.4,35.8,35.85,35.6],[36.8,34.2,35,36.1,35.72222222,35.3,34.8,35.1,35.3,35.1],[36.7,36.6,35.2,35.8,36.44444444,35.9,36,36.5,36.4,36.1],[26.88780212,51.75,51.75,51.75,42.07719421,51.65660095,51.75,51.75,51.75,59.91270447],[64,74,89,88,79,59,74,74,71,76],[12,2.777777778,-1.666666667,-2.222222222,1,2,2.777777778,2.777777778,1.666666667,1],[7,5,5,5,2,1,5,5,5,4],[3,1,1,1,1,1,1,1,1,1],[2,3,1,1,5,1,5,4,4,4],[1,8,6,3,4,3,2,3,2,2],[0,4,4,3,4,3,2,3,2,2],[1,1,2,1,1,1,1,2,1,2],[1,null,2,null,1,null,null,2,null,2],[5,2,1,1,1,1,1,1,1,5],[0,2,null,null,null,null,null,null,null,null],[6,1,1,4,6,7,1,2,1,3],[2,null,null,3,4,2,null,2,null,1],[7,8,3,1,7,7,3,5,7,2],[3,5,2,1,5,2,1,3,3,2],[1,2,1,2,1,2,1,1,1,1],[1,1,null,8,null,1,null,null,null,null],[2,1,1,1,1,1,1,1,2,1],[5,null,null,null,null,null,null,null,4,null],[3,2,1,1,1,1,1,1,2,2],[1,1,null,null,null,null,null,null,1,1],[2,8,null,null,null,null,null,null,7,1],[3,1,4,3,4,2,2,3,4,1],[2,1,1,2,1,2,1,1,1,2],[1,null,null,8,null,8,null,null,null,1],[1,2,1,1,1,2,2,2,1,1],["ʮ      վ","Pensioners",null,null,null,"Telefonseelsorge","badminton","street band",null,null],[null,"Men/women with foreign spouses not in UK",null,null,null,"Seniorenheim","bridge 1","samba band",null,null],[null,null,null,null,null,null,"bridge 2",null,null,null],[null,null,null,null,null,null,"bridge 3",null,null,null],[null,null,null,null,null,null,"badminton 2",null,null,null],[3,25,null,null,null,7,12,10,null,null],[null,30,null,null,null,2,5,10,null,null],[null,null,null,null,null,null,6,null,null,null],[null,null,null,null,null,null,1,null,null,null],[null,null,null,null,null,null,4,null,null,null],[3,3,4,3,2,4,2,2,4,3],[4,5,3,2,2,4,2,2,4,3],[4,2,4,4,3,3,4,2,4,3],[4,3,2,4,4,2,1,4,2,2],[4,2,2,2,4,2,2,2,3,3],[4,2,2,3,4,2,2,2,4,2],[2,5,3,4,3,2,2,3,2,5],[2,3,2,2,1,4,2,2,4,1],[4,4,3,2,5,3,3,3,4,4],[4,5,5,4,4,4,4,4,2,4],[4,5,3,4,4,4,4,3,5,2],[4,3,3,4,4,5,2,2,3,3],[4,4,4,2,4,2,3,2,4,4],[2,1,3,2,2,2,3,2,5,2],[4,1,3,2,2,3,4,3,3,3],[5,1,3,3,2,3,3,3,4,3],[3,1,2,2,3,3,3,2,3,1],[3,1,2,2,2,1,4,3,3,1],[1,1,2,1,1,2,3,3,3,1],[4,1,2,3,2,2,3,3,3,1],[2,1,2,2,2,3,3,3,5,2],[2,1,1,2,2,3,3,2,3,1],[3,1,2,2,3,2,3,3,3,2],[1,1,3,3,3,3,3,3,4,3],[5,5,3,3,3,2,2,4,5,3],[2,2,1,3,2,1,2,2,2,2],[1,1,2,3,2,2,2,3,5,1],[2,1,2,1,2,2,3,3,1,2],[3,1,2,3,2,4,4,3,1,2],[2,1,2,2,2,3,1,3,1,1],[3,1,1,4,2,4,4,3,1,1],[3,1,2,1,2,2,2,3,1,4],[2,1,1,2,1,1,2,3,1,2],[4,1,2,2,2,2,2,3,1,2],[4,1,2,4,4,3,3,3,1,3],["4","1","2","4","2","3","2","3","1","4"],[4,3,1,4,3,1,4,3,1,4],[4,1,2,1,3,2,4,3,1,4],[2,1,1,1,3,1,4,3,1,4],[4,1,1,2,3,1,3,3,1,4],[2,1,1,1,3,1,4,3,1,4],[2,1,1,1,1,1,2,3,1,1],[2,1,1,1,3,1,2,3,1,1],[2,1,2,1,3,1,2,3,1,1],[5,1,2,1,3,1,4,3,2,2],[1,1,1,1,1,1,2,3,1,1],[2,1,1,1,1,1,3,3,1,4],[4,1,5,1,2,1,3,5,5,5],[2,1,3,1,2,2,5,5,5,2],[2,1,3,1,4,1,4,5,5,3],[2,1,2,1,2,1,5,2,5,2],[5,1,4,2,5,1,6,4,4,3],[2,1,3,2,6,3,5,2,5,5],[2,1,2,2,1,1,5,3,5,1],[2,1,2,1,1,1,2,5,5,1],[5,1,3,7,4,1,5,5,3,2],[2,1,4,1,2,2,4,2,4,2],[2,1,5,1,2,1,5,6,3,2],[2,1,4,2,5,6,3,3,4,5],[4,1,2,1,4,5,3,4,4,2],[2,4,2,1,1,1,3,2,5,5],[2,1,2,1,1,1,4,3,5,1],[5,1,5,2,2,1,4,4,4,5],[5,1,3,4,2,2,3,4,6,1],[2,1,2,7,5,1,2,2,5,2],[5,7,2,1,2,1,3,2,3,7],[2,1,2,1,2,2,2,3,3,2],[6,3,2,1,2,7,4,5,6,5],[5,1,2,7,2,2,2,2,5,2],[4,1,2,7,2,1,3,4,5,2],[5,1,1,3,1,1,2,3,3,2],[5,1,1,2,2,1,2,3,5,2],[2,1,2,2,2,2,3,2,4,2],[5,1,3,6,4,2,2,5,5,3],[2,4,2,1,1,2,2,2,4,2],[3,4,5,1,2,6,3,2,3,2],[5,4,2,1,2,2,3,3,3,3],[2,2,3,1,2,2,2,2,4,2],[5,1,2,1,1,1,2,2,3,2],[4,4,4,1,6,7,3,5,5,4],[6,4,4,2,5,6,3,6,5,4],[6,1,3,1,1,3,3,2,3,2],[2,1,6,2,5,5,5,4,4,5],[4,5,5,5,5,5,4,5,5,5],[4,3,3,5,5,5,3,5,3,5],[4,3,4,5,5,5,4,5,4,5],[4,3,4,5,5,4,4,5,5,5],[3,3,3,5,5,2,3,5,3,2],[3,1,4,4,3,5,4,5,5,5],[2,1,4,3,2,4,5,3,5,5],[2,1,5,4,4,5,4,5,5,5],[3,1,4,4,3,4,4,5,5,5],[3,6,6,3,3,7,5,4,7,5],[2,5,5,6,4,3,4,2,5,4],[4,5,5,6,5,5,5,2,5,2],[6,2,5,5,4,4,5,2,5,5],[7,2,5,4,3,2,5,2,7,3],[6,5,5,3,3,3,5,2,7,3],[6,5,5,2,3,3,5,2,7,2],[2,1,2,3,1,1,2,1,3,1],[2,1,2,4,1,2,2,2,3,1],[2,1,4,1,1,1,2,1,4,1],[2,1,2,2,1,2,4,2,3,2],[2,1,2,4,1,1,2,2,4,2],[2,1,2,2,1,3,2,1,4,1],[2,1,2,3,2,4,2,1,3,1],[2,1,2,4,1,2,3,1,3,2],[2,1,2,2,2,4,2,2,2,1],[1,1,1,1,1,2,2,2,3,3],[2,1,2,2,1,2,2,1,4,1],[2,2,3,2,2,4,2,2,2,1],[2,3,2,2,2,4,2,1,2,1],[2,2,2,2,2,1,3,1,2,1],[2,3,2,4,1,1,3,2,2,2],[2,2,2,2,4,1,2,1,2,1],[2,1,5,4,4,4,4,4,5,5],[2,1,5,4,5,7,4,6,6,8],[4,1,5,4,5,6,2,4,4,7],[2,1,2,4,3,1,3,4,6,1],[2,1,3,5,3,6,2,4,3,3],[2,1,2,1,2,3,2,3,2,2],[2,1,1,2,1,7,2,3,1,5],[2,5,1,1,2,5,2,2,3,2],[4,1,3,4,4,4,4,4,3,2],[5,3,2,4,4,5,3,4,3,4],[3,4,5,5,3,3,4,5,5,4],[1,5,4,1,3,1,3,2,4,4],[2,2,3,2,4,2,3,2,2,3],[2,3,3,2,1,1,2,3,2,1],[4,2,5,2,3,5,2,2,2,3],[3,4,5,4,3,2,3,2,5,4],[4,1,3,5,4,5,2,4,2,2],[2,1,3,2,2,4,2,1,1,2],[1,5,1,2,2,1,3,3,3,2],[4,5,3,4,4,5,2,4,1,2],[2,1,2,5,3,5,2,4,2,2],[3,1,4,2,4,1,2,4,2,4],[2,2,1,1,3,1,2,2,1,2],[2,3,4,2,5,1,2,2,4,2],[4,1,3,5,1,4,3,3,2,2],[3,3,4,2,4,5,4,2,3,3],[2,3,4,4,3,4,4,3,3,2],[4,4,4,5,4,4,4,5,5,4],[4,4,5,5,2,5,3,4,4,3],[4,4,3,2,4,4,4,4,3,4],[2,3,5,4,4,4,4,4,3,3],[3,1,4,4,4,4,3,3,4,4],[4,5,4,5,4,2,4,3,3,4],[4,1,1,2,1,1,3,3,3,2],[3,3,4,4,3,3,3,4,4,4],[4,3,4,5,4,4,4,3,3,3],[4,1,1,4,1,1,3,3,3,2],[3,1,1,1,1,1,2,3,3,3],[2,1,5,4,1,5,3,2,3,2],[4,1,2,2,1,4,2,3,4,3],[1,2,3,3,3,1,2,2,4,2],[2,1,4,5,3,4,3,4,4,1],[4,5,5,3,2,4,2,4,4,4],[2,3,4,4,2,2,3,2,3,1],[2,5,5,1,3,4,2,4,4,2],[1,1,3,2,2,4,2,2,2,2],[5,3,2,4,3,1,4,2,3,1],[3,1,3,2,3,1,2,3,3,3],[4,5,4,4,4,3,4,3,4,5],[3,1,1,2,2,1,2,1,2,1],[2,1,2,2,3,1,2,3,3,1],[2,5,2,2,2,1,2,2,4,1],[4,3,3,4,3,3,2,4,1,2],[2,3,2,2,4,4,2,2,4,5],[3,1,2,1,4,2,3,3,3,3],[2,1,3,3,3,1,4,2,3,3],[4,1,2,4,4,1,3,4,3,4],[2,1,4,4,3,1,2,2,3,2],[2,3,1,1,2,1,4,2,3,5],[3,1,1,4,4,1,3,3,3,1],[2,1,1,5,3,1,2,3,3,1],[2,1,2,4,3,1,2,4,3,1],[4,5,4,5,3,3,3,1,1,5],[2,1,1,1,1,1,2,2,3,1],[8,6,5,7,5,7,4,5,5,7]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Site<\/th>\n      <th>age<\/th>\n      <th>sex<\/th>\n      <th>monogamous<\/th>\n      <th>romantic<\/th>\n      <th>health<\/th>\n      <th>exercise<\/th>\n      <th>eatdrink<\/th>\n      <th>gluctot<\/th>\n      <th>artgluctot<\/th>\n      <th>smoke<\/th>\n      <th>cigs<\/th>\n      <th>avgtemp<\/th>\n      <th>Temperature_t1<\/th>\n      <th>Temperature_t2<\/th>\n      <th>DEQ<\/th>\n      <th>AvgHumidity<\/th>\n      <th>mintemp<\/th>\n      <th>language<\/th>\n      <th>langfamily<\/th>\n      <th>SNI1<\/th>\n      <th>SNI2<\/th>\n      <th>SNI3<\/th>\n      <th>SNI4<\/th>\n      <th>SNI5<\/th>\n      <th>SNI6<\/th>\n      <th>SNI7<\/th>\n      <th>SNI8<\/th>\n      <th>SNI9<\/th>\n      <th>SNI10<\/th>\n      <th>SNI11<\/th>\n      <th>SNI12<\/th>\n      <th>SNI13<\/th>\n      <th>SNI14<\/th>\n      <th>SNI15<\/th>\n      <th>SNI16<\/th>\n      <th>SNI17<\/th>\n      <th>SNI18<\/th>\n      <th>SNI19<\/th>\n      <th>SNI20<\/th>\n      <th>SNI21<\/th>\n      <th>SNI22<\/th>\n      <th>SNI23<\/th>\n      <th>SNI24<\/th>\n      <th>SNI25<\/th>\n      <th>SNI26<\/th>\n      <th>SNI27<\/th>\n      <th>SNI28<\/th>\n      <th>SNI29<\/th>\n      <th>SNI30<\/th>\n      <th>SNI31<\/th>\n      <th>SNI32<\/th>\n      <th>scontrol1<\/th>\n      <th>scontrol2<\/th>\n      <th>scontrol3<\/th>\n      <th>scontrol4<\/th>\n      <th>scontrol5<\/th>\n      <th>scontrol6<\/th>\n      <th>scontrol7<\/th>\n      <th>scontrol8<\/th>\n      <th>scontrol9<\/th>\n      <th>scontrol10<\/th>\n      <th>scontrol11<\/th>\n      <th>scontrol12<\/th>\n      <th>scontrol13<\/th>\n      <th>stress1<\/th>\n      <th>stress2<\/th>\n      <th>stress3<\/th>\n      <th>stress4<\/th>\n      <th>stress5<\/th>\n      <th>stress6<\/th>\n      <th>stress7<\/th>\n      <th>stress8<\/th>\n      <th>stress9<\/th>\n      <th>stress10<\/th>\n      <th>stress11<\/th>\n      <th>stress12<\/th>\n      <th>stress13<\/th>\n      <th>stress14<\/th>\n      <th>phone1<\/th>\n      <th>phone2<\/th>\n      <th>phone3<\/th>\n      <th>phone4<\/th>\n      <th>phone5<\/th>\n      <th>phone6<\/th>\n      <th>phone7<\/th>\n      <th>phone8<\/th>\n      <th>phone9<\/th>\n      <th>onlineid1<\/th>\n      <th>onlineid2<\/th>\n      <th>onlineid3<\/th>\n      <th>onlineid4<\/th>\n      <th>onlineid5<\/th>\n      <th>onlineid6<\/th>\n      <th>onlineid7<\/th>\n      <th>onlineid8<\/th>\n      <th>onlineid9<\/th>\n      <th>onlineid10<\/th>\n      <th>onlineide11<\/th>\n      <th>ECR1<\/th>\n      <th>ECR2<\/th>\n      <th>ECR3<\/th>\n      <th>ECR4<\/th>\n      <th>ECR5<\/th>\n      <th>ECR6<\/th>\n      <th>ECR7<\/th>\n      <th>ECR8<\/th>\n      <th>ECR9<\/th>\n      <th>ECR10<\/th>\n      <th>ECR11<\/th>\n      <th>ECR12<\/th>\n      <th>ECR13<\/th>\n      <th>ECR14<\/th>\n      <th>ECR15<\/th>\n      <th>ECR16<\/th>\n      <th>ECR17<\/th>\n      <th>ECR18<\/th>\n      <th>ECR19<\/th>\n      <th>ECR20<\/th>\n      <th>ECR21<\/th>\n      <th>ECR22<\/th>\n      <th>ECR23<\/th>\n      <th>ECR24<\/th>\n      <th>ECR25<\/th>\n      <th>ECR26<\/th>\n      <th>ECR27<\/th>\n      <th>ECR28<\/th>\n      <th>ECR29<\/th>\n      <th>ECR30<\/th>\n      <th>ECR31<\/th>\n      <th>ECR32<\/th>\n      <th>ECR33<\/th>\n      <th>ECR34<\/th>\n      <th>ECR35<\/th>\n      <th>ECR36<\/th>\n      <th>HOME1<\/th>\n      <th>HOME2<\/th>\n      <th>HOME3<\/th>\n      <th>HOME4<\/th>\n      <th>HOME5<\/th>\n      <th>HOME6<\/th>\n      <th>HOME7<\/th>\n      <th>HOME8<\/th>\n      <th>HOME9<\/th>\n      <th>SNS1<\/th>\n      <th>SNS2<\/th>\n      <th>SNS3<\/th>\n      <th>SNS4<\/th>\n      <th>SNS5<\/th>\n      <th>SNS6<\/th>\n      <th>SNS7<\/th>\n      <th>ALEX1<\/th>\n      <th>ALEX2<\/th>\n      <th>ALEX3<\/th>\n      <th>ALEX4<\/th>\n      <th>ALEX5<\/th>\n      <th>ALEX6<\/th>\n      <th>ALEX7<\/th>\n      <th>ALEX8<\/th>\n      <th>ALEX9<\/th>\n      <th>ALEX10<\/th>\n      <th>ALEX11<\/th>\n      <th>ALEX12<\/th>\n      <th>ALEX13<\/th>\n      <th>ALEX14<\/th>\n      <th>ALEX15<\/th>\n      <th>ALEX16<\/th>\n      <th>KAMF1<\/th>\n      <th>KAMF2<\/th>\n      <th>KAMF3<\/th>\n      <th>KAMF4<\/th>\n      <th>KAMF5<\/th>\n      <th>KAMF6<\/th>\n      <th>KAMF7<\/th>\n      <th>STRAQ_1<\/th>\n      <th>STRAQ_2<\/th>\n      <th>STRAQ_3<\/th>\n      <th>STRAQ_4<\/th>\n      <th>STRAQ_5<\/th>\n      <th>STRAQ_6<\/th>\n      <th>STRAQ_7<\/th>\n      <th>STRAQ_8<\/th>\n      <th>STRAQ_9<\/th>\n      <th>STRAQ_10<\/th>\n      <th>STRAQ_11<\/th>\n      <th>STRAQ_12<\/th>\n      <th>STRAQ_13<\/th>\n      <th>STRAQ_14<\/th>\n      <th>STRAQ_15<\/th>\n      <th>STRAQ_16<\/th>\n      <th>STRAQ_17<\/th>\n      <th>STRAQ_18<\/th>\n      <th>STRAQ_19<\/th>\n      <th>STRAQ_20<\/th>\n      <th>STRAQ_21<\/th>\n      <th>STRAQ_22<\/th>\n      <th>STRAQ_23<\/th>\n      <th>STRAQ_24<\/th>\n      <th>STRAQ_25<\/th>\n      <th>STRAQ_26<\/th>\n      <th>STRAQ_27<\/th>\n      <th>STRAQ_28<\/th>\n      <th>STRAQ_29<\/th>\n      <th>STRAQ_30<\/th>\n      <th>STRAQ_31<\/th>\n      <th>STRAQ_32<\/th>\n      <th>STRAQ_33<\/th>\n      <th>STRAQ_34<\/th>\n      <th>STRAQ_35<\/th>\n      <th>STRAQ_36<\/th>\n      <th>STRAQ_37<\/th>\n      <th>STRAQ_38<\/th>\n      <th>STRAQ_39<\/th>\n      <th>STRAQ_40<\/th>\n      <th>STRAQ_41<\/th>\n      <th>STRAQ_42<\/th>\n      <th>STRAQ_43<\/th>\n      <th>STRAQ_44<\/th>\n      <th>STRAQ_45<\/th>\n      <th>STRAQ_46<\/th>\n      <th>STRAQ_47<\/th>\n      <th>STRAQ_48<\/th>\n      <th>STRAQ_49<\/th>\n      <th>STRAQ_50<\/th>\n      <th>STRAQ_51<\/th>\n      <th>STRAQ_52<\/th>\n      <th>STRAQ_53<\/th>\n      <th>STRAQ_54<\/th>\n      <th>STRAQ_55<\/th>\n      <th>STRAQ_56<\/th>\n      <th>STRAQ_57<\/th>\n      <th>socialdiversity<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Site","targets":1},{"name":"age","targets":2},{"name":"sex","targets":3},{"name":"monogamous","targets":4},{"name":"romantic","targets":5},{"name":"health","targets":6},{"name":"exercise","targets":7},{"name":"eatdrink","targets":8},{"name":"gluctot","targets":9},{"name":"artgluctot","targets":10},{"name":"smoke","targets":11},{"name":"cigs","targets":12},{"name":"avgtemp","targets":13},{"name":"Temperature_t1","targets":14},{"name":"Temperature_t2","targets":15},{"name":"DEQ","targets":16},{"name":"AvgHumidity","targets":17},{"name":"mintemp","targets":18},{"name":"language","targets":19},{"name":"langfamily","targets":20},{"name":"SNI1","targets":21},{"name":"SNI2","targets":22},{"name":"SNI3","targets":23},{"name":"SNI4","targets":24},{"name":"SNI5","targets":25},{"name":"SNI6","targets":26},{"name":"SNI7","targets":27},{"name":"SNI8","targets":28},{"name":"SNI9","targets":29},{"name":"SNI10","targets":30},{"name":"SNI11","targets":31},{"name":"SNI12","targets":32},{"name":"SNI13","targets":33},{"name":"SNI14","targets":34},{"name":"SNI15","targets":35},{"name":"SNI16","targets":36},{"name":"SNI17","targets":37},{"name":"SNI18","targets":38},{"name":"SNI19","targets":39},{"name":"SNI20","targets":40},{"name":"SNI21","targets":41},{"name":"SNI22","targets":42},{"name":"SNI23","targets":43},{"name":"SNI24","targets":44},{"name":"SNI25","targets":45},{"name":"SNI26","targets":46},{"name":"SNI27","targets":47},{"name":"SNI28","targets":48},{"name":"SNI29","targets":49},{"name":"SNI30","targets":50},{"name":"SNI31","targets":51},{"name":"SNI32","targets":52},{"name":"scontrol1","targets":53},{"name":"scontrol2","targets":54},{"name":"scontrol3","targets":55},{"name":"scontrol4","targets":56},{"name":"scontrol5","targets":57},{"name":"scontrol6","targets":58},{"name":"scontrol7","targets":59},{"name":"scontrol8","targets":60},{"name":"scontrol9","targets":61},{"name":"scontrol10","targets":62},{"name":"scontrol11","targets":63},{"name":"scontrol12","targets":64},{"name":"scontrol13","targets":65},{"name":"stress1","targets":66},{"name":"stress2","targets":67},{"name":"stress3","targets":68},{"name":"stress4","targets":69},{"name":"stress5","targets":70},{"name":"stress6","targets":71},{"name":"stress7","targets":72},{"name":"stress8","targets":73},{"name":"stress9","targets":74},{"name":"stress10","targets":75},{"name":"stress11","targets":76},{"name":"stress12","targets":77},{"name":"stress13","targets":78},{"name":"stress14","targets":79},{"name":"phone1","targets":80},{"name":"phone2","targets":81},{"name":"phone3","targets":82},{"name":"phone4","targets":83},{"name":"phone5","targets":84},{"name":"phone6","targets":85},{"name":"phone7","targets":86},{"name":"phone8","targets":87},{"name":"phone9","targets":88},{"name":"onlineid1","targets":89},{"name":"onlineid2","targets":90},{"name":"onlineid3","targets":91},{"name":"onlineid4","targets":92},{"name":"onlineid5","targets":93},{"name":"onlineid6","targets":94},{"name":"onlineid7","targets":95},{"name":"onlineid8","targets":96},{"name":"onlineid9","targets":97},{"name":"onlineid10","targets":98},{"name":"onlineide11","targets":99},{"name":"ECR1","targets":100},{"name":"ECR2","targets":101},{"name":"ECR3","targets":102},{"name":"ECR4","targets":103},{"name":"ECR5","targets":104},{"name":"ECR6","targets":105},{"name":"ECR7","targets":106},{"name":"ECR8","targets":107},{"name":"ECR9","targets":108},{"name":"ECR10","targets":109},{"name":"ECR11","targets":110},{"name":"ECR12","targets":111},{"name":"ECR13","targets":112},{"name":"ECR14","targets":113},{"name":"ECR15","targets":114},{"name":"ECR16","targets":115},{"name":"ECR17","targets":116},{"name":"ECR18","targets":117},{"name":"ECR19","targets":118},{"name":"ECR20","targets":119},{"name":"ECR21","targets":120},{"name":"ECR22","targets":121},{"name":"ECR23","targets":122},{"name":"ECR24","targets":123},{"name":"ECR25","targets":124},{"name":"ECR26","targets":125},{"name":"ECR27","targets":126},{"name":"ECR28","targets":127},{"name":"ECR29","targets":128},{"name":"ECR30","targets":129},{"name":"ECR31","targets":130},{"name":"ECR32","targets":131},{"name":"ECR33","targets":132},{"name":"ECR34","targets":133},{"name":"ECR35","targets":134},{"name":"ECR36","targets":135},{"name":"HOME1","targets":136},{"name":"HOME2","targets":137},{"name":"HOME3","targets":138},{"name":"HOME4","targets":139},{"name":"HOME5","targets":140},{"name":"HOME6","targets":141},{"name":"HOME7","targets":142},{"name":"HOME8","targets":143},{"name":"HOME9","targets":144},{"name":"SNS1","targets":145},{"name":"SNS2","targets":146},{"name":"SNS3","targets":147},{"name":"SNS4","targets":148},{"name":"SNS5","targets":149},{"name":"SNS6","targets":150},{"name":"SNS7","targets":151},{"name":"ALEX1","targets":152},{"name":"ALEX2","targets":153},{"name":"ALEX3","targets":154},{"name":"ALEX4","targets":155},{"name":"ALEX5","targets":156},{"name":"ALEX6","targets":157},{"name":"ALEX7","targets":158},{"name":"ALEX8","targets":159},{"name":"ALEX9","targets":160},{"name":"ALEX10","targets":161},{"name":"ALEX11","targets":162},{"name":"ALEX12","targets":163},{"name":"ALEX13","targets":164},{"name":"ALEX14","targets":165},{"name":"ALEX15","targets":166},{"name":"ALEX16","targets":167},{"name":"KAMF1","targets":168},{"name":"KAMF2","targets":169},{"name":"KAMF3","targets":170},{"name":"KAMF4","targets":171},{"name":"KAMF5","targets":172},{"name":"KAMF6","targets":173},{"name":"KAMF7","targets":174},{"name":"STRAQ_1","targets":175},{"name":"STRAQ_2","targets":176},{"name":"STRAQ_3","targets":177},{"name":"STRAQ_4","targets":178},{"name":"STRAQ_5","targets":179},{"name":"STRAQ_6","targets":180},{"name":"STRAQ_7","targets":181},{"name":"STRAQ_8","targets":182},{"name":"STRAQ_9","targets":183},{"name":"STRAQ_10","targets":184},{"name":"STRAQ_11","targets":185},{"name":"STRAQ_12","targets":186},{"name":"STRAQ_13","targets":187},{"name":"STRAQ_14","targets":188},{"name":"STRAQ_15","targets":189},{"name":"STRAQ_16","targets":190},{"name":"STRAQ_17","targets":191},{"name":"STRAQ_18","targets":192},{"name":"STRAQ_19","targets":193},{"name":"STRAQ_20","targets":194},{"name":"STRAQ_21","targets":195},{"name":"STRAQ_22","targets":196},{"name":"STRAQ_23","targets":197},{"name":"STRAQ_24","targets":198},{"name":"STRAQ_25","targets":199},{"name":"STRAQ_26","targets":200},{"name":"STRAQ_27","targets":201},{"name":"STRAQ_28","targets":202},{"name":"STRAQ_29","targets":203},{"name":"STRAQ_30","targets":204},{"name":"STRAQ_31","targets":205},{"name":"STRAQ_32","targets":206},{"name":"STRAQ_33","targets":207},{"name":"STRAQ_34","targets":208},{"name":"STRAQ_35","targets":209},{"name":"STRAQ_36","targets":210},{"name":"STRAQ_37","targets":211},{"name":"STRAQ_38","targets":212},{"name":"STRAQ_39","targets":213},{"name":"STRAQ_40","targets":214},{"name":"STRAQ_41","targets":215},{"name":"STRAQ_42","targets":216},{"name":"STRAQ_43","targets":217},{"name":"STRAQ_44","targets":218},{"name":"STRAQ_45","targets":219},{"name":"STRAQ_46","targets":220},{"name":"STRAQ_47","targets":221},{"name":"STRAQ_48","targets":222},{"name":"STRAQ_49","targets":223},{"name":"STRAQ_50","targets":224},{"name":"STRAQ_51","targets":225},{"name":"STRAQ_52","targets":226},{"name":"STRAQ_53","targets":227},{"name":"STRAQ_54","targets":228},{"name":"STRAQ_55","targets":229},{"name":"STRAQ_56","targets":230},{"name":"STRAQ_57","targets":231},{"name":"socialdiversity","targets":232}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# &lt;h1 lang="zh-CN"&gt;准备数据&lt;/h1&gt;
# &lt;h3 lang="zh-CN"&gt;对感兴趣问题所涉及题目求均值&lt;/h3&gt;


```r
df.pg.mean &lt;- df.pg.raw %&gt;%
  dplyr::filter(sex &gt; 0 &amp; sex &lt; 3) %&gt;% # 筛选出男性和女性的数据
  dplyr::mutate(ECR_mean=rowMeans(select(., starts_with("ECR")), na.rm = T),
                HOME_mean=rowMeans(select(., starts_with("HOME")), na.rm = T),
                sex=as.factor(sex)
                ) %&gt;%
  dplyr::select(age, sex, romantic, ECR_mean, HOME_mean, Temperature_t1, Temperature_t2)
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-d7b7978427539466f9a6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d7b7978427539466f9a6">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5"],[1922,1940,1945,1948,1948],["2","1","1","2","2"],[2,1,1,1,1],[3.5,1.75,2.888888888888889,2.194444444444445,2.638888888888889],[3.222222222222222,2.333333333333333,4,4.444444444444445,4.111111111111111],[36.8,34.2,35,36.1,35.72222222],[36.7,36.6,35.2,35.8,36.44444444]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>age<\/th>\n      <th>sex<\/th>\n      <th>romantic<\/th>\n      <th>ECR_mean<\/th>\n      <th>HOME_mean<\/th>\n      <th>Temperature_t1<\/th>\n      <th>Temperature_t2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"age","targets":1},{"name":"sex","targets":2},{"name":"romantic","targets":3},{"name":"ECR_mean","targets":4},{"name":"HOME_mean","targets":5},{"name":"Temperature_t1","targets":6},{"name":"Temperature_t2","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# &lt;h1 lang="zh-CN"&gt;TTEST()：bruceR中*t*检验函数的参数&lt;/h1&gt;
![](./picture/chp7/process_19.png)
---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="zh-CN"&gt;问题1: 单样本*t*检验&lt;/h2&gt;

```r
  # bruceR::TTEST(df.pg.mean, "HOME_mean", test.value = 3.5, test.sided = "&gt;")
  # bruceR::TTEST(df.pg.mean, "HOME_mean", test.value = 3.5, test.sided = "&lt;")
  result.ttest &lt;- capture.output({
  bruceR::TTEST(data=df.pg.mean, 
                y="HOME_mean", 
                test.value = 3.5, 
                test.sided = "=",
                file = "./output/chp7/one_sample_t.doc")
})
writeLines(result.ttest, "./output/chp7/single_t.md") # .md最整齐
```

---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_1.png)

---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="zh-CN"&gt;问题2: 独立样本*t*检验&lt;/h2&gt;

```r
    result.ttest &lt;- capture.output({   
    bruceR::TTEST(data=df.pg.mean, 
                y="ECR_mean",
                x="sex")
})

writeLines(result.ttest, "./output/chp7/inde_t.md")
```

---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_2.png)

---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="zh-CN"&gt;问题3: 配对样本*t*检验&lt;/h2&gt;

```r
   result.ttest &lt;- capture.output({
   bruceR::TTEST(data=df.pg.mean, 
                 y = c("Temperature_t1",              
                       "Temperature_t2"),
                 paired = T)  #是否为配对样本*t*检验？默认是FALSE
})

writeLines(result.ttest, "./output/chp7/pair_t.md")
```

---
# &lt;h1 lang="en"&gt;bruceR::TTEST&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_3.png)

---
# &lt;h1 lang="en"&gt;Reporting *t*-test results in APA&lt;/h1&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h3 lang="en"&gt;The basic format for reporting the result of a *t*-test is the same in each case:&lt;/h3&gt;
&lt;h3 lang="en"&gt;*t*(degress of freedom) = the t-value , *p* = p-value, Cohen's *d* = effect size&lt;/h3&gt;
&lt;br&gt;
![](./picture/chp7/process_8.png)


&lt;h4 lang="zh-CN"&gt;以上均与假想的问题无关，大家可结合自己的数据改写代码&lt;/h4&gt;
---
class: center, middle
&lt;span style="font-size: 60px;"&gt;7.3 anova&lt;/span&gt; &lt;br&gt;

---
# &lt;h1 lang="zh-CN"&gt;回顾ANOVA的基础知识&lt;/h1&gt;
![](./picture/chp7/process_4.png)

&lt;br&gt;
---
# &lt;h1 lang="zh-CN"&gt;回顾ANOVA的基础知识&lt;/h1&gt;
![](./picture/chp7/process_5.png)

---
# &lt;h1 lang="zh-CN"&gt;回顾ANOVA的基础知识&lt;/h1&gt;
![](./picture/chp7/process_6.png)


---
# &lt;h1 lang="zh-CN"&gt;回顾ANOVA的基础知识&lt;/h1&gt;
&lt;br&gt;
&lt;h2 lang="zh-CN"&gt;多因素方差分析概述&lt;/h2&gt;
&lt;br&gt;
&lt;h3 lang="zh-CN"&gt;多因素方差分析原理与单因素方差分析基本一致，即利用方差比较的方法，通过假设检验的过程来判断多个因素是否对因变量产生显著性影响。当有两个及以上因素对因变量产生影响时，使用多因素方差分析。多因素方差分析不仅要考虑每个因素的主效应，往往还要考虑因素之间的交互效应。&lt;/h3&gt;
&lt;br&gt;
![](./picture/chp7/process_7.png)

---
class: center, middle
&lt;span style="font-size: 60px;"&gt;7.4 anova in R&lt;/span&gt; &lt;br&gt;
---
# &lt;h1 lang="zh-CN"&gt;假想的问题&lt;/h1&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2 lang="zh-CN"&gt;1. “在match数据中，被试在匹配任务和不匹配任务上的反应时是否存在差异？”&lt;/h2&gt;
&lt;br&gt;
&lt;h2 lang="zh-CN"&gt;2. “在match数据中，被试在不同身份(self vs other)与不同效价(moral vs immoral)的条件组合下反应时是否存在差异？”&lt;/h2&gt;
&lt;br&gt;
---
# &lt;h1 lang="zh-CN"&gt;载入包&lt;/h1&gt;

```r
pacman::p_load("tidyverse", "bruceR")
```

---
# &lt;h1 lang="zh-CN"&gt;设置工作路径 - 导入数据与预处理&lt;/h1&gt;
  

```r
df.match &lt;-  read.csv('./data/match/match_raw.csv',
                      header = T, sep=",", stringsAsFactors = FALSE) %&gt;%
  # 拆分单元格内字符串
  tidyr::separate(col=Shape,
                  into=c("Valence","Identity"),
                  sep="(?&lt;=moral|immoral)(?=Self|Other)") %&gt;% 
  dplyr::select(Sub, Valence, Identity, everything()) %&gt;%
  dplyr::filter(ACC == 1) %&gt;%    # 只选择回答正确的数据
  dplyr::filter(!is.na(RT)) %&gt;%  # 剔除缺失值
  # remove outliers below and above 3rd sd
  dplyr::filter(RT &gt; quantile(RT, 0.0015) &amp; RT &lt; quantile(RT, 0.9985)) %&gt;%
  dplyr::mutate(RT = as.numeric(RT)) %&gt;%
  dplyr::mutate(Valence = as.factor(Valence),
                Identity = as.factor(Identity))
```

---
&lt;br&gt;
&lt;br&gt;


```r
DT::datatable(head(df.match, 10),
              fillContainer = TRUE, options = list(pageLength = 5))
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-1becf18cc4fe0e2f9e94" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1becf18cc4fe0e2f9e94">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],[7302,7302,7302,7302,7302,7302,7302,7302,7302,7302],["moral","immoral","immoral","immoral","moral","moral","moral","immoral","moral","immoral"],["Other","Other","Self","Self","Other","Self","Other","Self","Other","Other"],["02-May-2018_14:23:08","02-May-2018_14:23:10","02-May-2018_14:23:15","02-May-2018_14:23:17","02-May-2018_14:23:19","02-May-2018_14:23:21","02-May-2018_14:23:24","02-May-2018_14:23:26","02-May-2018_14:23:28","02-May-2018_14:23:30"],["Exp","Exp","Exp","Exp","Exp","Exp","Exp","Exp","Exp","Exp"],[22,22,22,22,22,22,22,22,22,22],["female","female","female","female","female","female","female","female","female","female"],["R","R","R","R","R","R","R","R","R","R"],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,3,5,6,7,8,9,10,11,12],["moralSelf","moralOther","immoralSelf","immoralSelf","moralOther","moralSelf","immoralSelf","moralOther","moralSelf","immoralOther"],["mismatch","mismatch","match","match","match","match","mismatch","mismatch","mismatch","match"],["n","n","m","m","m","m","n","n","n","m"],["n","n","m","m","m","m","n","n","n","m"],[1,1,1,1,1,1,1,1,1,1],[0.7043,0.9903,0.8207,0.7547,0.5429,0.9009,0.9550999999999999,0.6952,0.7593,0.7135]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sub<\/th>\n      <th>Valence<\/th>\n      <th>Identity<\/th>\n      <th>Date<\/th>\n      <th>Prac<\/th>\n      <th>Age<\/th>\n      <th>Sex<\/th>\n      <th>Hand<\/th>\n      <th>Block<\/th>\n      <th>Bin<\/th>\n      <th>Trial<\/th>\n      <th>Label<\/th>\n      <th>Match<\/th>\n      <th>CorrResp<\/th>\n      <th>Resp<\/th>\n      <th>ACC<\/th>\n      <th>RT<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,6,9,10,11,16,17]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Sub","targets":1},{"name":"Valence","targets":2},{"name":"Identity","targets":3},{"name":"Date","targets":4},{"name":"Prac","targets":5},{"name":"Age","targets":6},{"name":"Sex","targets":7},{"name":"Hand","targets":8},{"name":"Block","targets":9},{"name":"Bin","targets":10},{"name":"Trial","targets":11},{"name":"Label","targets":12},{"name":"Match","targets":13},{"name":"CorrResp","targets":14},{"name":"Resp","targets":15},{"name":"ACC","targets":16},{"name":"RT","targets":17}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# &lt;h1 lang="zh-CN"&gt;CODE_问题1处理&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;计算被试匹配与不匹配任务上的平均反应时间及其标准差&lt;/h2&gt;


```r
df.match.mean &lt;- df.match %&gt;%
    dplyr::group_by(Sub, Match) %&gt;%
    dplyr::summarise(
        n = n(),
        rt_sd = sd(as.numeric(RT), na.rm = T),
        rt_mean = mean(RT, na.rm = T), # 对于factor数据，先转成character，再变成numeric
        ) %&gt;%
    dplyr::ungroup()
```

```
## `summarise()` has grouped output by 'Sub'. You can override using the `.groups`
## argument.
```

---
&lt;br&gt;
&lt;br&gt;


```r
DT::datatable(head(df.match.mean, 10),
              fillContainer = TRUE, options = list(pageLength = 5))
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-c1673cd67aa7eef6a477" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c1673cd67aa7eef6a477">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],[7302,7302,7303,7303,7304,7304,7305,7305,7306,7306],["match","mismatch","match","mismatch","match","mismatch","match","mismatch","match","mismatch"],[160,149,148,133,245,194,274,226,270,252],[0.1066127195660557,0.09948999390935108,0.1154244251153946,0.08818165605481966,0.1372617283754443,0.106883820747074,0.1282723985920395,0.1215707494964833,0.1350075850740869,0.1093445555693987],[0.66311875,0.7436342281879195,0.7041067567567567,0.7565548872180451,0.6817963265306123,0.7510015463917525,0.604401094890511,0.7190504424778761,0.7089014814814815,0.77705]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sub<\/th>\n      <th>Match<\/th>\n      <th>n<\/th>\n      <th>rt_sd<\/th>\n      <th>rt_mean<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Sub","targets":1},{"name":"Match","targets":2},{"name":"n","targets":3},{"name":"rt_sd","targets":4},{"name":"rt_mean","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# &lt;h1 lang="zh-CN"&gt;CODE_问题1处理&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;单因素被试内设计&lt;/h2&gt;


```r
#比较被试在匹配任务和不匹配任务上的反应时是否存在差异
#单因素被试内设计（长型数据）
result.anova &lt;- capture.output({
df_within &lt;- df.match.mean %&gt;%
  bruceR::MANOVA(subID="Sub",    # 被试id
                 dv="rt_mean",   # 因变量，因为是MANOVA，实际上因变量可以再后面设置很多个
                 within="Match") # 设置条件，因素分析的条件
})
```

```
## 
##     * Data are aggregated to mean (across items/trials)
##     if there are &gt;=2 observations per subject and cell.
##     You may use Linear Mixed Model to analyze the data,
##     e.g., with subjects and items as level-2 clusters.
```

```r
writeLines(result.anova, "./output/chp7/anova_1.md")
# 若不符合球形假设要加上：sph.correction = "GG"
```

---
# &lt;h1 lang="en"&gt;bruceR::MANOVA&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_10.png)

---
# &lt;h1 lang="zh-CN"&gt;ANOVA问题2&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;计算被试在不同身份和效价条件下的平均反应时间及其标准差&lt;/h2&gt;


```r
df.match.mean &lt;- df.match %&gt;%
    dplyr::group_by(Sub,Sex, Valence,Identity) %&gt;%
    dplyr::summarise(
        n = n(),
        rt_sd = sd(as.numeric(RT), na.rm = T),
        rt_mean = mean(as.numeric(RT), na.rm = T)
        ) %&gt;%
    dplyr::ungroup()
```

```
## `summarise()` has grouped output by 'Sub', 'Sex', 'Valence'. You can override
## using the `.groups` argument.
```

---
&lt;br&gt;
&lt;br&gt;

```r
DT::datatable(head(df.match.mean, 10),
              fillContainer = TRUE, options = list(pageLength = 5))
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-88495238a9e9e02805fc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-88495238a9e9e02805fc">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],[7302,7302,7302,7302,7303,7303,7303,7303,7304,7304],["female","female","female","female","male","male","male","male","female","female"],["immoral","immoral","moral","moral","immoral","immoral","moral","moral","immoral","immoral"],["Other","Self","Other","Self","Other","Self","Other","Self","Other","Self"],[78,76,84,71,75,67,69,70,95,114],[0.1065463914677477,0.1067044337772302,0.1145246323846281,0.1037868966851849,0.09146220512192872,0.09967007567280334,0.1189011856817321,0.1094633121461439,0.1103408177036574,0.1188280482807858],[0.7059705128205128,0.7240855263157895,0.6616880952380952,0.721443661971831,0.7412826666666666,0.7537582089552238,0.7203260869565218,0.7004157142857143,0.7562673684210526,0.7296157894736842]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sub<\/th>\n      <th>Sex<\/th>\n      <th>Valence<\/th>\n      <th>Identity<\/th>\n      <th>n<\/th>\n      <th>rt_sd<\/th>\n      <th>rt_mean<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[1,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Sub","targets":1},{"name":"Sex","targets":2},{"name":"Valence","targets":3},{"name":"Identity","targets":4},{"name":"n","targets":5},{"name":"rt_sd","targets":6},{"name":"rt_mean","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# &lt;h1 lang="zh-CN"&gt;MANOVA()：多因素被试间/被试内/混合设计方差分析ANOVA&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;主要参数&lt;/h2&gt;
![](./picture/chp7/process_16.png)

---
# &lt;h1 lang="zh-CN"&gt;问题2的R语法&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;长数据转换为宽数据&lt;/h2&gt;


```r
df.match.within &lt;- df.match.mean %&gt;%
  dplyr::select(-c(n, rt_sd)) %&gt;%
  dplyr::mutate(Valence = paste("A_", Valence, sep = ""),#将变量的名称进行修改转换，不生产新的变量
                Identity = paste("B_", Identity, sep = "")) %&gt;%
  # 将morality和identity组合名称起来生成一个新的变量"Conds"
  tidyr::unite("Conds", Valence:Identity, sep = "&amp;",remove=TRUE) %&gt;% 
  tidyr::pivot_wider(names_from = Conds,
                     values_from = rt_mean)

head(df.match.within)
```

```
## # A tibble: 6 × 6
##     Sub Sex    `A_immoral&amp;B_Other` `A_immoral&amp;B_Self` `A_moral&amp;B_Other`
##   &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;
## 1  7302 female               0.706              0.724             0.662
## 2  7303 male                 0.741              0.754             0.720
## 3  7304 female               0.756              0.730             0.757
## 4  7305 male                 0.685              0.659             0.641
## 5  7306 male                 0.778              0.763             0.660
## 6  7307 female               0.751              0.677             0.716
## # ℹ 1 more variable: `A_moral&amp;B_Self` &lt;dbl&gt;
```

```r
#str(df.match.within)
```

---
# &lt;h1 lang="zh-CN"&gt;问题2的R语法&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;两因素被试内设计_宽数据&lt;/h2&gt;


```r
#被试在不同身份(self vs other)与不同效价(moral vs moral)的条件组合下反应时是否存在差异）
  result.anova &lt;- capture.output({
  res_rmANOVA_1 &lt;- bruceR::MANOVA(data=df.match.within,
                   dvs="A_immoral&amp;B_Other:A_moral&amp;B_Self",
                   dvs.pattern="A_(.+)B_(.+)",#正则表达式
                   within=c("A_","B_"))#表示2个主条件
  })
```

```
## 
## Note:
## dvs="A_immoral&amp;B_Other:A_moral&amp;B_Self" is matched to variables:
## A_immoral&amp;B_Other, A_immoral&amp;B_Self, A_moral&amp;B_Other, A_moral&amp;B_Self
```

```r
writeLines(result.anova, "./output/chp7/anova_2.md")
```

---
# &lt;h1 lang="en"&gt;bruceR::MANOVA&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_17.png)

---
# &lt;h1 lang="en"&gt;bruceR::MANOVA&lt;/h1&gt;
## &lt;h2 lang="en"&gt;OUTPUT&lt;/h2&gt;
![](./picture/chp7/process_18.png)
---
# &lt;h1 lang="zh-CN"&gt;问题2的R语法&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;两因素被试内设计_长数据&lt;/h2&gt;


```r
#被试在不同身份(self vs other)与不同效价(good vs bad)的条件组合下反应时是否存在差异）
#head(df.match.mean)
  result.anova &lt;- capture.output({
  res_rmANOVA_2 &lt;- bruceR::MANOVA(data=df.match.mean,
                   dv="rt_mean",
                   within=c("Valence","Identity"),
                   subID="Sub")
  })
```

```
## 
##     * Data are aggregated to mean (across items/trials)
##     if there are &gt;=2 observations per subject and cell.
##     You may use Linear Mixed Model to analyze the data,
##     e.g., with subjects and items as level-2 clusters.
```

```r
writeLines(result.anova, "./output/chp7/anova_3.md")
```

---
# &lt;h1 lang="zh-CN"&gt;简单效应检验与多重比较&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;主要参数&lt;/h2&gt;
![](./picture/chp7/process_13.png)

---
# &lt;h1 lang="zh-CN"&gt;简单效应检验与多重比较&lt;/h1&gt;
# &lt;h2 lang="zh-CN"&gt;问题2的简单效应比较&lt;/h2&gt;


```r
result.check &lt;- capture.output({
sim_eff_1 &lt;- res_rmANOVA_1 %&gt;%
  bruceR::EMMEANS("A_", by="B_")#简单效应分析
})
writeLines(result.check, "./output/chp7/check.md")

#sim_eff_1 &lt;- res_rmANOVA_1 %&gt;%
  #EMMEANS("B_", by="A_")   和上一个同理，只是转换了不同的形式
```

---
# &lt;h1 lang="zh-CN"&gt;被试间设计的语法实现&lt;/h1&gt;
# &lt;h2 lang="en"&gt;性别与亲密关系对ECR得分的效应&lt;/h2&gt;


```r
# MANOVA(data, dv="SCORE", between=c("A", "B"))
# data 代表两因素的数据类型
# dv 因变量
# between 被试间因素的名称，此处表示两因素被试间设计，如果只有一个就是单因素被试间设计
res_ANOVA_btw &lt;- df.pg.mean %&gt;%
  bruceR::MANOVA(., 
                 dv="ECR_mean",
                 between = c("sex", "romantic"))
```

```
## 
## ====== ANOVA (Between-Subjects Design) ======
## 
## Descriptives:
## ───────────────────────────────────
##  "sex" "romantic"  Mean    S.D.   n
## ───────────────────────────────────
##   sex1  romantic1 3.009 (0.844) 236
##   sex1  romantic2 3.687 (0.649) 206
##   sex2  romantic1 2.869 (0.845) 591
##   sex2  romantic2 3.743 (0.745) 451
## ───────────────────────────────────
## Total sample size: N = 1484
## 
## ANOVA Table:
## Dependent variable(s):      ECR_mean
## Between-subjects factor(s): sex, romantic
## Within-subjects factor(s):  –
## Covariate(s):               –
## ─────────────────────────────────────────────────────────────────────────────────
##                      MS   MSE df1  df2       F     p     η²p [90% CI of η²p]  η²G
## ─────────────────────────────────────────────────────────────────────────────────
## sex               0.540 0.624   1 1480   0.865  .353       .001 [.000, .004] .001
## romantic        185.520 0.624   1 1480 297.099 &lt;.001 ***   .167 [.140, .195] .167
## sex * romantic    2.965 0.624   1 1480   4.748  .029 *     .003 [.000, .010] .003
## ─────────────────────────────────────────────────────────────────────────────────
## MSE = mean square error (the residual variance of the linear model)
## η²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)
## ω²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)
## η²G = generalized eta-squared (see Olejnik &amp; Algina, 2003)
## Cohen’s f² = η²p / (1 - η²p)
## 
## Levene’s Test for Homogeneity of Variance:
## ───────────────────────────────────────────
##               Levene’s F df1  df2     p    
## ───────────────────────────────────────────
## DV: ECR_mean      12.699   3 1480 &lt;.001 ***
## ───────────────────────────────────────────
```

---
# &lt;h1 lang="zh-CN"&gt;混合设计的语法实现&lt;/h1&gt;
# &lt;h2 lang="en"&gt;CODE&lt;/h2&gt;
&lt;h3 lang="zh-CN"&gt;以2个被试间1个被试内的混合设计形式为例&lt;/h3&gt;


```r
# 假设数据集是mixed.3_2b1w
# A、C是被试间变量，B是被试内变量
# MANOVA(mixed.3_2b1w, dvs="B1:B2", dvs.pattern="B(.)",
       #between=c("A", "C"), within="B")
res_ANOVA_mix &lt;- df.match.mean %&gt;%
  dplyr::mutate(Sex = ifelse(Sex =="1", "male",
                             ifelse(Sex == "2", "female", Sex))) %&gt;%
  bruceR::MANOVA(., 
                 subID = "Sub",
                 dv="rt_mean",
                 between = c("Sex"),
                 within = c("Valence", "Identity"))
```

```
## 
##     * Data are aggregated to mean (across items/trials)
##     if there are &gt;=2 observations per subject and cell.
##     You may use Linear Mixed Model to analyze the data,
##     e.g., with subjects and items as level-2 clusters.
```

```
## 
## ====== ANOVA (Mixed Design) ======
## 
## Descriptives:
## ─────────────────────────────────────────────
##   "Sex" "Valence" "Identity"  Mean    S.D.  n
## ─────────────────────────────────────────────
##  female   immoral      Other 0.717 (0.065) 27
##  female   immoral      Self  0.733 (0.073) 27
##  female   moral        Other 0.709 (0.077) 27
##  female   moral        Self  0.677 (0.063) 27
##  male     immoral      Other 0.721 (0.050) 17
##  male     immoral      Self  0.736 (0.043) 17
##  male     moral        Other 0.704 (0.049) 17
##  male     moral        Self  0.689 (0.044) 17
## ─────────────────────────────────────────────
## Total sample size: N = 44
## 
## ANOVA Table:
## Dependent variable(s):      rt_mean
## Between-subjects factor(s): Sex
## Within-subjects factor(s):  Valence, Identity
## Covariate(s):               –
## ───────────────────────────────────────────────────────────────────────────────────────
##                              MS   MSE df1 df2      F     p     η²p [90% CI of η²p]  η²G
## ───────────────────────────────────────────────────────────────────────────────────────
## Sex                       0.000 0.012   1  42  0.042  .839       .001 [.000, .053] .001
## Valence                   0.042 0.001   1  42 46.148 &lt;.001 ***   .524 [.346, .649] .062
## Sex * Valence             0.000 0.001   1  42  0.000  .990       .000 [.000, .000] .000
## Identity                  0.001 0.001   1  42  0.626  .433       .015 [.000, .123] .001
## Sex * Identity            0.001 0.001   1  42  0.459  .502       .011 [.000, .113] .001
## Valence * Identity        0.015 0.001   1  42 12.169  .001 **    .225 [.065, .394] .023
## Sex * Valence * Identity  0.001 0.001   1  42  0.605  .441       .014 [.000, .122] .001
## ───────────────────────────────────────────────────────────────────────────────────────
## MSE = mean square error (the residual variance of the linear model)
## η²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)
## ω²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)
## η²G = generalized eta-squared (see Olejnik &amp; Algina, 2003)
## Cohen’s f² = η²p / (1 - η²p)
## 
## Levene’s Test for Homogeneity of Variance:
## ───────────────────────────────────────────────
##                    Levene’s F df1 df2     p    
## ───────────────────────────────────────────────
## DV: immoral_Other       0.691   1  42  .410    
## DV: immoral_Self        1.866   1  42  .179    
## DV: moral_Other         2.753   1  42  .105    
## DV: moral_Self          1.679   1  42  .202    
## ───────────────────────────────────────────────
## 
## Mauchly’s Test of Sphericity:
## The repeated measures have only two levels. The assumption of sphericity is always met.
```

---
# &lt;h1 lang="zh-CN"&gt;课堂练习&lt;/h1&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h2 lang="zh-CN"&gt;1. “在Penguin数据中，不同站点(“Site”)的被试在主观压力上是否有差异？”&lt;/h2&gt;
&lt;br&gt;
&lt;h2 lang="zh-CN"&gt;2. “在match数据中，如何分析 *d'*”&lt;/h2&gt;
&lt;br&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
